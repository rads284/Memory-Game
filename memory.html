<html>
<head>
  <style>
  img{
    height:80px;
    width:80px;
    padding:2.5px;
  };
  </style>
</head>
<body>
  <center>
  <div id="board">
  </div>
  <h1 id="demo">
  </h1>
</center>
</body>
</html>

<script>

var arr=["snapchat.png","facebook.png","twitter.png","linkedin.png","chrome.png","safari.jpeg","opera.png","firefox.jpeg","accenture.jpeg","deloitte.png","microsoft.jpg","apple.png","kpmg.png","skype.png","youtube.png","ibm.png","quora.png","intel.jpeg","blender.jpeg","adobe.jpeg","photoshop.png","nevidia.jpeg","google.jpeg","flipkart.jpeg","amazon.png","googleplus.png","tcs.png","ubuntu.jpeg","mckinsey.png","infosys.png","ie.png","apache.png"];
var c=[4,6,8];
var choice=1,s,one,two,scr=0,count=0,prev=-1;


function menu() {
  choice=(prompt("Choose Game Difficulty! \n 1. Beginner \n 2. Intermediate \n 3. Hard"));
  switch (choice) {
    case '1':
      arr=arr.slice(0,8);
      break;
    case '2':
      arr=arr.slice(0,18);
      break;
    case '3':
      break;
    default:
      alert("Invalid Input");
      menu();
  }
  makeboard(arr);
}
function shuffle(arr)
  {
    var j,temp;
    for(i=0;i<arr.length;i++)
    {
      j=Math.ceil(Math.random()*(arr.length-1));
      temp=arr[i];
      arr[i]=arr[j];
      arr[j]=temp;
    }
  }
function makeboard(arr)
  {
    var arr1=arr.slice();
    arr.push.apply(arr,arr1);
    shuffle(arr);
    var x,i,y;

    var board=document.getElementById("board");
    for(i=0;i<arr.length;i++)
    {
      x=document.createElement("img");
      x.src="question.png";
      x.id=i;
      x.addEventListener("click",foo,false);
      if(i%(c[choice-1])==0)
      {
        y=document.createElement("br");
        board.appendChild(y);
      }
      board.appendChild(x);

    }

    s=document.createElement("h1");
    s.textContent="SCORE : 0";
    s.id="score";
    document.body.appendChild(s);

    var countDownDate = new Date().getTime();
    countDownDate+=(5*60*1000);
    var x = setInterval(function() {
    var now = new Date().getTime();
    var distance = countDownDate - now;
    var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    var seconds = Math.floor((distance % (1000 * 60)) / 1000);
    document.getElementById("demo").innerHTML = minutes + "m " + seconds + "s ";
    if (distance < 0) {
        clearInterval(x);
        alert("Your Score is: "+scr+"\nTime is up!!!");
        var ass=document.getElementById("board");
        var p=document.getElementById("score");
        ass.innerHTML="";
        s.textContent="";
        menu();
    }
    }, 1000);
  }


function score1()
{ if(scr==((c[choice-1]*c[choice-1])/2))
    {
        setTimeout(function(){alert("You WIn");},1000);
        // alert("You Win!!!");

        setTimeout(function(){
          var ass=document.getElementById("board");
          var p=document.getElementById("score");
          ass.innerHTML="";
          p.innerHTML="";
          menu();},1000);
    }
}

function flip(x)
{
  var q=document.getElementById(x);
  q.src=arr[x];
}
function foo()
{
  clicktile(this.id);
}
function clicktile(x)
{

    if(prev!=x)
      count++;
    flip(x);
    var q=document.getElementById(x);
    if(count>2)
      {
        count=1;
        if(one.src!=two.src)
        {
          one.src="question.png";
          two.src="question.png";
          one.addEventListener("click",foo,false);
          two.addEventListener("click",foo,false);
        }
      }

    if(count==1)
    {
      one=document.getElementById(x);
      if(one!=null)
        {one.removeEventListener("click",foo,false);}
    }
    if(count==2)
    {
      two=document.getElementById(x);
      if(two!=null)
        {two.removeEventListener("click",foo,false);console.log(one.src+two.src);}
      if((one.src==two.src))
      {
        scr+=1;
        console.log("does"+scr);
        var s=document.getElementById("score");
        s.textContent="SCORE : "+(scr);
        score1();
      }
    }
    prev=q.id;
  }
menu();

</script>
